<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Topaz Water Polo - Monthly Calendar</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a4d7a 0%, #0d2a47 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 700px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.4);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #1a4d7a 0%, #0d2a47 100%);
            color: white;
            padding: 50px 30px;
            text-align: center;
            position: relative;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="45" fill="none" stroke="rgba(255,255,255,0.05)" stroke-width="1"/></svg>');
            background-size: 100px;
            opacity: 0.3;
        }

        .header-content {
            position: relative;
            z-index: 1;
        }

        .header h1 {
            font-size: 2.8em;
            margin-bottom: 5px;
            font-weight: 800;
            letter-spacing: 1px;
        }

        .header .subtitle {
            font-size: 1.3em;
            opacity: 0.95;
            font-weight: 300;
            margin-top: 5px;
        }

        .content {
            padding: 50px 40px;
        }

        .form-group {
            margin-bottom: 35px;
        }

        label {
            display: block;
            margin-bottom: 12px;
            font-weight: 600;
            color: #1a4d7a;
            font-size: 1.15em;
            letter-spacing: 0.3px;
        }

        select, input {
            width: 100%;
            padding: 16px;
            border: 2px solid #d1d5db;
            border-radius: 12px;
            font-size: 1.05em;
            transition: all 0.3s;
            background: white;
            cursor: pointer;
        }

        select:hover, input:hover {
            border-color: #1a4d7a;
        }

        select:focus, input:focus {
            outline: none;
            border-color: #1a4d7a;
            box-shadow: 0 0 0 4px rgba(26, 77, 122, 0.1);
        }

        .btn {
            background: linear-gradient(135deg, #1a4d7a 0%, #0d2a47 100%);
            color: white;
            border: none;
            padding: 20px 40px;
            font-size: 1.2em;
            border-radius: 12px;
            cursor: pointer;
            width: 100%;
            font-weight: 700;
            transition: all 0.3s;
            margin-top: 15px;
            letter-spacing: 0.5px;
            text-transform: uppercase;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 30px rgba(26, 77, 122, 0.4);
        }

        .btn:active {
            transform: translateY(-1px);
        }

        .preview {
            margin-top: 40px;
            padding: 25px;
            background: linear-gradient(135deg, #f0f4f8 0%, #e6eef5 100%);
            border-radius: 15px;
            text-align: center;
            border: 2px solid #d1e3f0;
        }

        .preview h3 {
            color: #1a4d7a;
            margin-bottom: 20px;
            font-size: 1.3em;
            font-weight: 700;
        }

        .color-indicator {
            display: inline-block;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            margin-left: 12px;
            vertical-align: middle;
            border: 3px solid white;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }

        .calendar-preview {
            background: white;
            padding: 25px;
            border-radius: 12px;
            margin-top: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
        }

        .calendar-preview h4 {
            color: #1a4d7a;
            margin-bottom: 15px;
            font-size: 1.1em;
            font-weight: 700;
        }

        .calendar-preview p {
            color: #4b5563;
            line-height: 1.8;
            font-size: 1em;
        }

        .footer {
            text-align: center;
            padding: 20px;
            color: #6b7280;
            font-size: 0.9em;
        }

        @media (max-width: 600px) {
            .header h1 {
                font-size: 2em;
            }
            
            .header .subtitle {
                font-size: 1.1em;
            }
            
            .content {
                padding: 35px 25px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="header-content">
                <h1>üèä TOPAZ</h1>
                <div class="subtitle">WATER POLO CLUB</div>
            </div>
        </div>
        
        <div class="content">
            <div class="form-group">
                <label for="group">Select Your Group</label>
                <select id="group">
                    <option value="black">Topaz Black</option>
                    <option value="orange">Topaz Orange</option>
                    <option value="blue">Topaz Blue</option>
                    <option value="girls">Topaz Girls</option>
                </select>
            </div>

            <div class="form-group">
                <label for="month">Select Month</label>
                <input type="month" id="month">
            </div>

            <button class="btn" onclick="generatePDF()">üì• Download Calendar</button>

            <div class="preview">
                <h3>
                    <span id="selected-group">Topaz Black</span>
                    <span class="color-indicator" id="color-preview" style="background: #000;"></span>
                </h3>
                <div class="calendar-preview">
                    <h4>Your calendar will include:</h4>
                    <p>
                        ‚úì Topaz Water Polo branding<br>
                        ‚úì Full monthly calendar view<br>
                        ‚úì Group color coding<br>
                        ‚úì Professional print-ready format
                    </p>
                </div>
            </div>
        </div>

        <div class="footer">
            ¬© 2025 Topaz Water Polo Club
        </div>
    </div>

    <script>
        const { jsPDF } = window.jspdf;
        
        // ====================================================================
        // ADMIN: UPDATE YOUR GOOGLE DRIVE CALENDAR LINKS HERE
        // Parents won't see this - it's only in the code
        // ====================================================================
        const CALENDAR_LINKS = {
            black: 'https://drive.google.com/your-topaz-black-calendar-link',
            orange: 'https://drive.google.com/your-topaz-orange-calendar-link',
            blue: 'https://drive.google.com/your-topaz-blue-calendar-link',
            girls: 'https://drive.google.com/your-topaz-girls-calendar-link'
        };
        // ====================================================================
        
        const groupColors = {
            black: { primary: '#000000', secondary: '#333333', name: 'Topaz Black' },
            orange: { primary: '#FF6B35', secondary: '#F7931E', name: 'Topaz Orange' },
            blue: { primary: '#1E88E5', secondary: '#42A5F5', name: 'Topaz Blue' },
            girls: { primary: '#E91E63', secondary: '#F06292', name: 'Topaz Girls' }
        };

        // Set default month to current month
        const now = new Date();
        document.getElementById('month').value = `${now.getFullYear()}-${String(now.getMonth() + 1).padStart(2, '0')}`;

        // Update preview when group changes
        document.getElementById('group').addEventListener('change', function() {
            const group = this.value;
            const groupInfo = groupColors[group];
            document.getElementById('selected-group').textContent = groupInfo.name;
            document.getElementById('color-preview').style.background = groupInfo.primary;
        });

        function generatePDF() {
            const group = document.getElementById('group').value;
            const monthInput = document.getElementById('month').value;
            
            if (!monthInput) {
                alert('Please select a month');
                return;
            }

            const [year, month] = monthInput.split('-');
            const groupInfo = groupColors[group];
            const calendarLink = CALENDAR_LINKS[group];
            const monthName = new Date(year, month - 1).toLocaleString('default', { month: 'long', year: 'numeric' });

            const doc = new jsPDF();
            const pageWidth = doc.internal.pageSize.getWidth();
            const pageHeight = doc.internal.pageSize.getHeight();

            // Header with Topaz branding - using navy blue color
            doc.setFillColor(13, 42, 71); // #0d2a47
            doc.rect(0, 0, pageWidth, 45, 'F');

            // Logo circle
            doc.setFillColor(255, 255, 255);
            doc.circle(25, 22, 12, 'F');
            doc.setFillColor(13, 42, 71);
            doc.setFontSize(16);
            doc.setFont(undefined, 'bold');
            doc.text('T', 21.5, 27);

            // Title
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(26);
            doc.setFont(undefined, 'bold');
            doc.text('TOPAZ WATER POLO', pageWidth / 2, 20, { align: 'center' });
            doc.setFontSize(12);
            doc.setFont(undefined, 'normal');
            doc.text('CLUB', pageWidth / 2, 28, { align: 'center' });

            // Group name with color
            doc.setFontSize(16);
            const r = parseInt(groupInfo.primary.slice(1, 3), 16);
            const g = parseInt(groupInfo.primary.slice(3, 5), 16);
            const b = parseInt(groupInfo.primary.slice(5, 7), 16);
            doc.setFillColor(r, g, b);
            doc.rect(pageWidth / 2 - 40, 32, 80, 9, 'F');
            doc.setTextColor(255, 255, 255);
            doc.setFont(undefined, 'bold');
            doc.text(groupInfo.name, pageWidth / 2, 38.5, { align: 'center' });

            // Month and Year
            doc.setTextColor(0, 0, 0);
            doc.setFontSize(22);
            doc.setFont(undefined, 'bold');
            doc.text(monthName, pageWidth / 2, 60, { align: 'center' });

            // Calendar grid
            const startY = 75;
            const cellWidth = (pageWidth - 20) / 7;
            const cellHeight = 25;

            // Days of week
            const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            doc.setFillColor(r, g, b);
            doc.rect(10, startY, pageWidth - 20, cellHeight, 'F');
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(11);
            doc.setFont(undefined, 'bold');
            days.forEach((day, i) => {
                doc.text(day, 10 + i * cellWidth + cellWidth / 2, startY + cellHeight / 2 + 2, { align: 'center' });
            });

            // Calendar days
            const firstDay = new Date(year, month - 1, 1).getDay();
            const daysInMonth = new Date(year, month, 0).getDate();
            
            let currentDay = 1;
            let currentY = startY + cellHeight;

            doc.setTextColor(0, 0, 0);
            doc.setFont(undefined, 'normal');
            doc.setFontSize(13);

            for (let week = 0; week < 6; week++) {
                for (let day = 0; day < 7; day++) {
                    const x = 10 + day * cellWidth;
                    const y = currentY;

                    // Draw cell border
                    doc.setDrawColor(220, 220, 220);
                    doc.rect(x, y, cellWidth, cellHeight);

                    // Add day number
                    if ((week === 0 && day >= firstDay) || (week > 0 && currentDay <= daysInMonth)) {
                        doc.setFont(undefined, 'bold');
                        doc.text(String(currentDay), x + 5, y + 8);
                        currentDay++;
                    }
                }
                currentY += cellHeight;
                if (currentDay > daysInMonth) break;
            }

            // Footer
            doc.setFontSize(9);
            doc.setTextColor(13, 42, 71);
            doc.setFont(undefined, 'bold');
            doc.text('TOPAZ WATER POLO CLUB', pageWidth / 2, pageHeight - 15, { align: 'center' });
            doc.setFontSize(8);
            doc.setFont(undefined, 'normal');
            doc.textWithLink('View Full Calendar Online', pageWidth / 2, pageHeight - 10, { 
                align: 'center',
                url: calendarLink
            });

            // Save PDF
            doc.save(`Topaz_${groupInfo.name.replace(' ', '_')}_${monthName.replace(' ', '_')}.pdf`);
        }
    </script>
</body>
</html>
